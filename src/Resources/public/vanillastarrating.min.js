!function(){var t={},i={};t.getUIDHTML=function(t){return t.uniqueNumber||(t.uniqueNumber=function(){for(var t=[],i=0;i<36;i++)t[i]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]="0123456789abcdef".substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-",t.join("")}())};var s=t.Slick=this.Slick||{};s.uidOf=function(i){return t.getUIDHTML(i)};Element.implement("_store",(function(t,e){var r=s.uidOf(this);return(i[r]||(i[r]={}))[t]=e,this})),Element.implement("_retrieve",(function(t,e){var r=s.uidOf(this),o=i[r]||(i[r]={});return void 0!==e&&void 0===o[t]&&(o[t]=e),o[t]}))}(),function(){var t="",i="star_empty.png",s="star_full.png",e=null,r=function(){this.options={form:null,radios:"rating",selector:"",linksClass:"star",imageFolder:t,imageEmpty:i,imageFull:s,imageHover:e,width:16,height:16,half:!1,tip:null,tipTarget:null,tipTargetType:"text",disabled:!1,ajaxUrl:"",requestToken:"",ajaxData:""},this.radios=[],this.stars=[],this.currentIndex=-1};r.prototype.initialize=function(t){null==t&&(t={}),this.options=Object.assign(this.options,t),0!=this.options.imageFolder.length&&"/"!=this.options.imageFolder.substr(-1)&&(this.options.imageFolder+="/"),null==this.options.imageHover&&(this.options.imageHover=this.options.imageFull);var i=this.options.form;this.options.form=document.getElementById(i),this.options.form||(this.options.form=document.querySelectorAll("form[name="+i+"]")[0]);var s=Date.now();if(this.options.form){var e="star_"+(s++).toString(36);this.options.form.classList.add(e),this.options.selector+="form."+e+" "}this.options.selector+="input[type=radio][name="+this.options.radios+"]";var r=0,o=this,n=null,a=document.querySelectorAll(this.options.selector).length,h=parseInt(this.options.width),l=h,p=parseInt(this.options.height);this.options.half&&(l-=h=parseInt(h/2));for(var u=document.querySelectorAll(this.options.selector);r<u.length;){this.radios[r]=u[r],u[r].getAttribute("checked")&&(this.currentIndex=r),u[r].getAttribute("disabled")&&(this.options.disabled=!0),u[r].style.display="none";var d=document.createElement("a");if(d.classList.add(this.options.linksClass),this.stars[r]=d,this.stars[r]._store("ratingIndex",r),this.stars[r].style.backgroundImage='url("'+this.options.imageFolder+this.options.imageEmpty+'")',this.stars[r].style.backgroundRepeat="no-repeat",this.stars[r].style.display="inline-block",this.stars[r].style.width=this.options.half&&r%2?l+"px":h+"px",this.stars[r].style.height=p+"px",this.options.half&&(this.stars[r].style.backgroundPosition=r%2?"-"+h+"px 0":"0 0"),this.stars[r].addEventListener("mouseenter",(function(){o.starEnter(this._retrieve("ratingIndex"))})),this.stars[r].addEventListener("mouseleave",(function(){o.starLeave()})),this.options.tip){var f=this.options.tip;f=(f=f.replace("[VALUE]",u[r].value)).replace("[COUNT]",a),this.options.tipTarget?this.stars[r]._store("ratingTip",f):this.stars[r].setAttribute("title",f)}this.stars[r].addEventListener("click",(function(){o.options.disabled||(o.setCurrentIndex(this._retrieve("ratingIndex")),o.sendAjaxRequest(o.getValue()))})),n=u[r],r++}var c=this.stars;for(r=0;r<c.length;r++)n.after(c[r]),n=c[r];return this.options.disabled?this.disable():this.enable(),this.fillStars(),this},r.prototype.setValue=function(t){for(var i=0;i<this.radios.length;i++)this.radios[i].value==t&&(this.currentIndex=i);return this.refreshRadios(),this.fillStars(),this},r.prototype.getValue=function(){return this.radios[this.currentIndex]?this.radios[this.currentIndex].value:null},r.prototype.setCurrentIndex=function(t){return this.currentIndex=t,this.refreshRadios(),this.fillStars(),this},r.prototype.enable=function(){this.options.disabled=!1;for(var t=0;t<this.stars.length;t++)this.stars[t].style.cursor="pointer";return this.refreshRadios(),this},r.prototype.disable=function(){this.options.disabled=!0;for(var t=0;t<this.stars.length;t++)this.stars[t].style.cursor="default";return this.refreshRadios(),this},r.prototype.refresh=function(){return this.fillStars(),this.refreshRadios(),this},r.prototype.fillStars=function(t){for(var i=0;i<this.stars.length;i++){var s=this.options.imageEmpty;null==t&&i<=this.currentIndex&&(s=this.options.imageFull),null!=t&&i<=t&&(s=this.options.imageHover),this.stars[i].style.backgroundImage='url("'+this.options.imageFolder+s+'")'}return this},r.prototype.starEnter=function(t,i){if(!this.options.disabled)return this.fillStars(t),this.options.tip&&this.options.tipTarget&&("text"==this.options.tipTargetType?this.options.tipTarget.innerText=this.stars[t]._retrieve("ratingTip"):this.options.tipTarget.innerHTML=this.stars[t]._retrieve("ratingTip")),this},r.prototype.starLeave=function(){if(!this.options.disabled)return this.fillStars(),this.options.tip&&this.options.tipTarget&&("text"==this.options.tipTargetType?this.options.tipTarget.innerText="":this.options.tipTarget.innerHTML=""),this},r.prototype.setCurrentIndex=function(t){return this.currentIndex=t,this.refreshRadios(),this.fillStars(),this},r.prototype.refreshRadios=function(){for(var t=0;t<this.radios.length;t++)this.radios[t].setAttribute("disabled",this.options.disabled),this.radios[t].setAttribute("checked",t==this.currentIndex);return this},r.prototype.sendAjaxRequest=function(t){var i=JSON.parse(this.options.ajaxData),s="rating="+t+"&data[id]="+i.id+"&data[pid]="+i.pid+"&data[item]="+i.item+"&REQUEST_TOKEN="+this.options.requestToken,e=new XMLHttpRequest;e.open("POST",this.options.ajaxUrl),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.onload=function(){200===e.status||e.status},e.send(s)},window.VanillaStarRating=function(){return new r}}();
//# sourceMappingURL=vanillastarrating.min.js.map