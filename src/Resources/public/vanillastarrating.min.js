!function(){let t={},i={};t.getUIDHTML=function(t){return t.uniqueNumber||(t.uniqueNumber=function(){let t=[],i="0123456789abcdef";for(let e=0;e<36;e++)t[e]=i.substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]=i.substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-",t.join("")}())};let e=t.Slick=this.Slick||{};e.uidOf=function(i){return t.getUIDHTML(i)};Element.prototype._store=function(t,s){let r=e.uidOf(this);return(i[r]||(i[r]={}))[t]=s,this},Element.prototype._retrieve=function(t,s){let r=e.uidOf(this),o=i[r]||(i[r]={}),n="undefined";return typeof s!==n&&typeof o[t]===n&&(o[t]=s),o[t]}}(),function(){let t="",i="star_empty.png",e="star_full.png",s=null,r=function(){this.options={form:null,radios:"rating",selector:"",linksClass:"star",imageFolder:t,imageEmpty:i,imageFull:e,imageHover:s,width:16,height:16,half:!1,tip:null,tipTarget:null,tipTargetType:"text",disabled:!1,ajaxUrl:"",requestToken:"",ajaxData:""},this.radios=[],this.stars=[],this.currentIndex=-1};r.prototype.initialize=function(t){null==t&&(t={}),this.options=Object.assign(this.options,t),0!=this.options.imageFolder.length&&"/"!=this.options.imageFolder.substr(-1)&&(this.options.imageFolder+="/"),null==this.options.imageHover&&(this.options.imageHover=this.options.imageFull);let i=this.options.form;this.options.form=document.getElementById(i),this.options.form||(this.options.form=document.querySelectorAll("form[name="+i+"]")[0]);let e=Date.now();if(this.options.form){let t="star_"+(e++).toString(36);this.options.form.classList.add(t),this.options.selector+="form."+t+" "}this.options.selector+="input[type=radio][name="+this.options.radios+"]";let s=0,r=this,o=null,n=document.querySelectorAll(this.options.selector).length,a=parseInt(this.options.width),h=a,l=parseInt(this.options.height);this.options.half&&(a=parseInt(a/2),h-=a);let p=document.querySelectorAll(this.options.selector);for(;s<p.length;){this.radios[s]=p[s],p[s].getAttribute("checked")&&(this.currentIndex=s),p[s].getAttribute("disabled")&&(this.options.disabled=!0),p[s].style.display="none";let t=document.createElement("a");if(t.classList.add(this.options.linksClass),this.stars[s]=t,this.stars[s]._store("ratingIndex",s),this.stars[s].style.backgroundImage='url("'+this.options.imageFolder+this.options.imageEmpty+'")',this.stars[s].style.backgroundRepeat="no-repeat",this.stars[s].style.display="inline-block",this.stars[s].style.width=this.options.half&&s%2?h+"px":a+"px",this.stars[s].style.height=l+"px",this.options.half&&(this.stars[s].style.backgroundPosition=s%2?"-"+a+"px 0":"0 0"),this.stars[s].addEventListener("mouseenter",(function(){r.starEnter(this._retrieve("ratingIndex"))})),this.stars[s].addEventListener("mouseleave",(function(){r.starLeave()})),this.options.tip){let t=this.options.tip;t=t.replace("[VALUE]",p[s].value),t=t.replace("[COUNT]",n),this.options.tipTarget?this.stars[s]._store("ratingTip",t):this.stars[s].setAttribute("title",t)}this.stars[s].addEventListener("click",(function(){r.options.disabled||(r.setCurrentIndex(this._retrieve("ratingIndex")),r.sendAjaxRequest(r.getValue()))})),o=p[s],s++}let u=this.stars;for(let t=0;t<u.length;t++)o.after(u[t]),o=u[t];return this.options.disabled?this.disable():this.enable(),this.fillStars(),this},r.prototype.setValue=function(t){for(let i=0;i<this.radios.length;i++)this.radios[i].value==t&&(this.currentIndex=i);return this.refreshRadios(),this.fillStars(),this},r.prototype.getValue=function(){return this.radios[this.currentIndex]?this.radios[this.currentIndex].value:null},r.prototype.setCurrentIndex=function(t){return this.currentIndex=t,this.refreshRadios(),this.fillStars(),this},r.prototype.enable=function(){this.options.disabled=!1;for(let t=0;t<this.stars.length;t++)this.stars[t].style.cursor="pointer";return this.refreshRadios(),this},r.prototype.disable=function(){this.options.disabled=!0;for(let t=0;t<this.stars.length;t++)this.stars[t].style.cursor="default";return this.refreshRadios(),this},r.prototype.refresh=function(){return this.fillStars(),this.refreshRadios(),this},r.prototype.fillStars=function(t){for(let i=0;i<this.stars.length;i++){let e=this.options.imageEmpty;null==t&&i<=this.currentIndex&&(e=this.options.imageFull),null!=t&&i<=t&&(e=this.options.imageHover),this.stars[i].style.backgroundImage='url("'+this.options.imageFolder+e+'")'}return this},r.prototype.starEnter=function(t,i){if(!this.options.disabled)return this.fillStars(t),this.options.tip&&this.options.tipTarget&&("text"==this.options.tipTargetType?this.options.tipTarget.innerText=this.stars[t]._retrieve("ratingTip"):this.options.tipTarget.innerHTML=this.stars[t]._retrieve("ratingTip")),this},r.prototype.starLeave=function(){if(!this.options.disabled)return this.fillStars(),this.options.tip&&this.options.tipTarget&&("text"==this.options.tipTargetType?this.options.tipTarget.innerText="":this.options.tipTarget.innerHTML=""),this},r.prototype.setCurrentIndex=function(t){return this.currentIndex=t,this.refreshRadios(),this.fillStars(),this},r.prototype.refreshRadios=function(){for(let t=0;t<this.radios.length;t++)this.radios[t].setAttribute("disabled",this.options.disabled),this.radios[t].setAttribute("checked",t==this.currentIndex);return this},r.prototype.sendAjaxRequest=function(t){let i=this.radios,e=this.stars,s=this.currentIndex,r=this,n=JSON.parse(this.options.ajaxData),a="rating="+t+"&data[id]="+n.id+"&data[pid]="+n.pid+"&data[item]="+n.item+"&REQUEST_TOKEN="+this.options.requestToken,h=new XMLHttpRequest;h.open("POST",this.options.ajaxUrl),h.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),h.setRequestHeader("X-Requested-With","XMLHttpRequest"),h.send(a),h.onload=function(){200===h.status?o(i,e,s,r):200!==h.status&&this.options.tip&&this.options.tipTarget&&("text"==this.options.tipTargetType?this.options.tipTarget.innerText="Error! "+h.status:this.options.tipTarget.innerHTML="Error! "+h.status)},h.onerror=function(){this.options.tip&&this.options.tipTarget&&("text"==this.options.tipTargetType?this.options.tipTarget.innerText="Error!":this.options.tipTarget.innerHTML="Error!")}};let o=function(t,i,e,s){let r=!1;if(null!=t&&null!=t){for(let i=0;i<t.length;i++)if(i==e){t[i].setAttribute("checked","true"),r=!0;break}if(r)for(let e=0;e<t.length;e++)t[e].setAttribute("disabled","true"),i[e].style.cursor="default";s.options.disabled=!0}};window.VanillaStarRating=function(){return new r}}();
//# sourceMappingURL=vanillastarrating.min.js.map